FROM node:20.12-alpine

WORKDIR /app

COPY package*.json .

RUN npm install --legacy-peer-deps

COPY . .

# Set environment variables
ARG VITE_GOOGLE_ID
ENV VITE_GOOGLE_ID=${VITE_GOOGLE_ID}

ARG VITE_FACEBOOK_ID
ENV VITE_FACEBOOK_ID=${VITE_FACEBOOK_ID}

ARG VITE_REACT_APP_URL
ENV VITE_REACT_APP_URL=${VITE_REACT_APP_URL}

ARG VITE_STRIPE
ENV VITE_STRIPE=${VITE_STRIPE}

EXPOSE 5173

CMD ["npm", "run", "dev"]